name: greenfield-workflows
description: >
  Evaluate different workflow approaches for greenfield (new project) development.
  Tests direct implementation, plan-then-implement, multi-command workflows, and
  the full projspec specification-to-implementation pipeline.
version: "1.0.0"

defaults:
  max_turns: 15
  max_budget_usd: 10.0
  allowed_tools:
    - Read
    - Edit
    - Write
    - Bash
    - Glob
    - Grep
  model: sonnet
  timeout_seconds: 1500

evaluations:
  # Simple utility function - direct implementation
  # - id: utility-function-direct
  #   name: Simple Utility Function (Direct)
  #   description: >
  #     Single-prompt direct implementation of a utility function.
  #     Tests the most basic greenfield workflow without planning phases.
  #   task: >
  #     Create a Python module with a function that validates email addresses.
  #     The function should:
  #     1. Accept a string parameter
  #     2. Return True if the email is valid, False otherwise
  #     3. Handle edge cases like empty strings, missing @ symbol, invalid domains
  #     4. Include type hints and docstrings
  #     5. Create unit tests in a separate test file
  #   tags:
  #     - simple
  #     - direct
  #     - python
  #     - utility
  #   phases:
  #     - name: implement
  #       permission_mode: acceptEdits
  #       prompt_template: "{task}"

  # REST API project - plan then implement
  # - id: utility-function-plan-then-implement
  #   name: Simple Utility Function (Direct)
  #   description: >
  #     Single-prompt direct implementation of a utility function.
  #     Tests the most basic greenfield workflow without planning phases.
  #   task: >
  #     Create a Python module with a function that validates email addresses.
  #     The function should:
  #     1. Accept a string parameter
  #     2. Return True if the email is valid, False otherwise
  #     3. Handle edge cases like empty strings, missing @ symbol, invalid domains
  #     4. Include type hints and docstrings
  #     5. Create unit tests in a separate test file
  #   tags:
  #     - simple
  #     - direct
  #     - python
  #     - utility
  #     - plan-then-implement
  #   max_budget_usd: 15.0
  #   timeout_seconds: 450
  #   phases:
  #     - name: planning
  #       permission_mode: plan
  #       prompt_template: >
  #         You are starting a NEW greenfield project in an EMPTY workspace directory.
  #         There is no existing codebase to explore - you will create everything from scratch.

  #         Create a detailed implementation plan for the following task.
  #         Include: file structure, code organization, implementation steps, and test strategy.

  #         IMPORTANT:
  #         - Do NOT use ExitPlanMode or EnterPlanMode tools
  #         - Do NOT use Task tool to explore - the workspace is empty
  #         - Just output your plan as text in your response
  #         - The workspace is empty and ready for you to create new files

  #         Task: {task}
  #     - name: implementation
  #       permission_mode: acceptEdits
  #       prompt_template: >
  #         Now implement the following plan. Create all necessary files
  #         in the current working directory.

  #         PLAN FROM PREVIOUS PHASE:
  #         {previous_result}

  #         IMPORTANT:
  #         - Create all files directly in the current workspace directory
  #         - Do NOT ask for user input or approval - just implement autonomously
  #         - Ensure the code is functional and follows best practices
  #         - Run tests if applicable to verify your implementation

  # # CLI tool - iterative build-test-refine
  # - id: cli-tool-iterative
  #   name: CLI Calculator Tool (Iterative Refinement)
  #   description: >
  #     Multi-phase iterative workflow: build initial version, write tests,
  #     then refine based on test results. Tests iterative development patterns.
  #   task: >
  #     Create a command-line calculator application in Python that:
  #     1. Accepts mathematical expressions as command-line arguments
  #     2. Supports basic operations: +, -, *, /, and parentheses
  #     3. Supports advanced operations: power (^), modulo (%), square root
  #     4. Handles errors gracefully with helpful messages
  #     5. Includes a --help option with usage examples
  #     6. Uses argparse or click for argument parsing
  #   tags:
  #     - iterative
  #     - cli
  #     - python
  #     - tool
  #   phases:
  #     - name: initial-implementation
  #       permission_mode: acceptEdits
  #       prompt_template: "{task}"
  #     - name: write-tests
  #       permission_mode: acceptEdits
  #       prompt: >
  #         Write comprehensive unit tests for the calculator CLI you just created.
  #         Cover edge cases, error handling, and all supported operations.
  #         Use pytest as the testing framework.
  #       continue_session: true
  #     - name: run-and-refine
  #       permission_mode: bypassPermissions
  #       prompt: >
  #         Run the tests you created and fix any failing tests.
  #         Improve code quality based on test results.
  #         Ensure all tests pass before completing.
  #       continue_session: true

  # Full spectra workflow simulation
  - id: spectra-full-workflow-direct
    name: Spectra Full Workflow Simulation (Direct)
    description: >
      Simulates the complete spectra workflow: specify, plan, tasks, implement.
      Tests multi-command sequential workflows for complex project development.
      Direct implementation, no agent.
    task: >
      Build a task management CLI application with the following capabilities:
      1. Add, list, update, and delete tasks
      2. Mark tasks as complete/incomplete
      3. Assign priorities (low, medium, high)
      4. Filter and search tasks
      5. Persist tasks to a JSON file
      6. Support for due dates
    tags:
      - spectra
      - complex
      - multi-phase
      - python
      - cli
    max_turns: 200
    max_budget_usd: 50.0
    timeout_seconds: 3600
    phases:
      - name: specify
        permission_mode: acceptEdits
        prompt: >
          /spectra:specify Build a task management CLI application that allows users to:
          - Add, list, update, and delete tasks
          - Mark tasks as complete/incomplete
      - name: plan
        permission_mode: acceptEdits
        prompt: "/spectra:plan"
      - name: tasks
        permission_mode: acceptEdits
        prompt: "/spectra:tasks"
      - name: implement
        permission_mode: bypassPermissions
        prompt: "/spectra:implement --direct, don't ask for user input, just implement the whole plan"
  - id: spectra-full-workflow-agent
    name: Spectra Full Workflow Simulation (Agent)
    description: >
      Simulates the complete spectra workflow: specify, plan, tasks, implement.
      Tests multi-command sequential workflows for complex project development.
      Agent implementation, no direct implementation.
    task: >
      Build a task management CLI application with the following capabilities:
      1. Add, list, update, and delete tasks
      2. Mark tasks as complete/incomplete
      3. Assign priorities (low, medium, high)
      4. Filter and search tasks
      5. Persist tasks to a JSON file
      6. Support for due dates
    tags:
      - spectra
      - complex
      - multi-phase
      - python
      - cli
    max_turns: 200
    max_budget_usd: 50.0
    timeout_seconds: 3600
    phases:
      - name: specify
        permission_mode: acceptEdits
        prompt: >
          /spectra:specify Build a task management CLI application that allows users to:
          - Add, list, update, and delete tasks
          - Mark tasks as complete/incomplete
      - name: plan
        permission_mode: acceptEdits
        prompt: "/spectra:plan"
      - name: tasks
        permission_mode: acceptEdits
        prompt: "/spectra:tasks"
      - name: implement
        permission_mode: bypassPermissions
        prompt: "/spectra:implement, don't ask for user input, just implement the whole plan"
  # # Bonus: TypeScript/Node.js project for language variety
  # - id: node-package-direct
  #   name: Node.js Utility Package (Direct)
  #   description: >
  #     Direct implementation of a Node.js/TypeScript utility package.
  #     Tests greenfield development in a different language ecosystem.
  #   task: >
  #     Create a TypeScript npm package that provides string manipulation utilities:
  #     1. truncate(str, maxLength, suffix?) - truncate with ellipsis
  #     2. slugify(str) - convert to URL-friendly slug
  #     3. capitalize(str) - capitalize first letter of each word
  #     4. reverse(str) - reverse string
  #     5. countWords(str) - count words in string
  #     Include:
  #     - TypeScript configuration
  #     - Package.json with proper metadata
  #     - Unit tests with Jest
  #     - Type definitions
  #   tags:
  #     - simple
  #     - direct
  #     - typescript
  #     - nodejs
  #     - npm
  #   phases:
  #     - name: implement
  #       permission_mode: acceptEdits
  #       prompt_template: "{task}"
